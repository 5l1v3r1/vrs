<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>::WA_Title_Options:: - ::WA_Title_WebAdmin::</title>
        @head.html@
        <!-- [[ BUNDLE END ]] -->
        <script src="script/Strings.Server.js"></script>
        <script src="script/bootstrap-helper.js"></script>
        <script src="Settings.js"></script>
    </head>
    <body>
        <div id="page-container">
            <div id="content" class="container-fluid">
                <div class="row row-offcanvas row-offcanvas-left">
                    <div class="col-xs-12 col-sm-9">
                        <h1 class="page-header">
                            ::WA_Title_Options::
                        </h1>

                        <div id="failure-message" class="alert alert-danger">
                        </div>

                        <!---->
                        <!--Receivers-->
                        <!---->
                        <div data-bsu="collapsible-panel" data-bsu-options="expanded">
                            <div>
                                ::Receivers::
                                <div class="pull-right" data-bsu="validate-icons" data-bsu-field="ReceiverWrapUpValidation"></div>
                            </div>
                            <div>
                                <div class="row">
                                    <div class="col-sm-12 text-right">
                                        <button type="button" class="btn btn-info" data-bind="click: $.proxy(pageHandler.createAndEditReceiver, pageHandler)">
                                            ::Add::
                                        </button>
                                    </div>
                                </div>
                                <div class="row table-responsive">
                                    <table class="table table-condensed table-striped">
                                        <thead>
                                            <tr>
                                                <th class="thin-column"></th>
                                                <th>::Enabled::</th>
                                                <th>::Name::</th>
                                                <th>::Format::</th>
                                                <th>::Hidden::</th>
                                                <th>::Location::</th>
                                                <th>::Connection::</th>
                                                <th>::ConnectionParameters::</th>
                                                <th class="thin-column"></th>
                                            </tr>
                                        </thead>
                                        <tbody data-bind="foreach: Receivers">
                                            <tr data-bind="css: { 'text-muted': !Enabled() }">
                                                <td class="thin-column">
                                                    <div data-bsu="validate-icons" data-bsu-field="WrapUpValidation"></div>
                                                </td>
                                                <td>
                                                    <input type="checkbox" data-bind="checked: Enabled" />
                                                </td>
                                                <td data-bind="text: Name"></td>
                                                <td data-bind="text: FormattedDataSource"></td>
                                                <td data-bind="text: FormattedReceiverUsage"></td>
                                                <td data-bind="with: Location">
                                                    <span data-bind="text: Name"></span>
                                                </td>
                                                <td data-bind="text: FormattedConnectionType"></td>
                                                <td data-bind="text: ConnectionParameters"></td>
                                                <td class="text-nowrap">
                                                    <button type="button" class="btn btn-success" data-bind="click: SelectRow" data-toggle="modal" data-target="#edit-receiver">
                                                        <span class="glyphicon glyphicon-pencil"></span>
                                                    </button>
                                                    <button type="button" class="btn btn-danger" data-bind="click: DeleteRow">
                                                        <span class="glyphicon glyphicon-remove"></span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div id="edit-receiver" data-bsu="modal" data-bsu-options="header-close large" data-bind="with: $root.SelectedReceiver()">
                            <div>
                                <span data-bind="text: Name"></span>
                            </div>
                            <div class="form-horizontal">
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="EnabledValidation">
                                    <div class="col-sm-offset-4 col-sm-8 checkbox">
                                        <label>
                                            <input type="checkbox" data-bind="checked: Enabled" />
                                            ::Enabled::
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="NameValidation">
                                    <label class="col-sm-4">::Name:::</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" data-bind="textInput: Name" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4">::Format:::</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" data-bind="options: $root.DataSources, optionsText: 'Description', optionsValue: 'Value', value: DataSource"></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4">::Location:::</label>
                                    <div class="col-sm-7">
                                        <select class="form-control" data-bind="options: $root.ReceiverLocations(), optionsText: 'Name', optionsValue: 'UniqueId', value: ReceiverLocationId, valueAllowUnset: true"></select>
                                    </div>
                                    <div class="col-sm-1">
                                        <button type="button" class="btn btn-default btn-sm" data-bind="click: ResetLocation">
                                            <span class="glyphicon glyphicon-remove"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4">::ConnectionType:::</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" data-bind="options: $root.ConnectionTypes, optionsText: 'Description', optionsValue: 'Value', value: ConnectionType"></select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-4 col-sm-8">
                                        <button type="button" class="btn btn-primary" data-bind="click: TestConnection">
                                            ::TestConnection::
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group" data-bind="visible: $root.TestConnectionOutcome() != null, with: $root.TestConnectionOutcome">
                                    <div class="col-sm-offset-4 col-sm-8" >
                                        <span data-bind="text: Message"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4"></label>
                                    <div class="col-sm-8">
                                        <select class="form-control" data-bind="options: $root.ReceiverUsages, optionsText: 'Description', optionsValue: 'Value', value: ReceiverUsage"></select>
                                    </div>
                                </div>

                                <div data-bind="visible: ConnectionType() == 0">
                                    <div class="form-section">
                                        ::Network::
                                    </div>
                                    <div class="form-group" data-bsu="field-validate" data-bsu-field="IsPassiveValidation">
                                        <div class="col-sm-offset-4 col-sm-8 checkbox">
                                            <label>
                                                <input type="checkbox" data-bind="checked: IsPassive" />
                                                ::PassiveReceiver::
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group" data-bsu="field-validate" data-bsu-field="AddressValidation">
                                        <label class="col-sm-4">::UNC:::</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" data-bind="textInput: Address" />
                                        </div>
                                    </div>
                                    <div class="form-group" data-bsu="field-validate" data-bsu-field="PortValidation">
                                        <label class="col-sm-4">::Port:::</label>
                                        <div class="col-sm-8">
                                            <input type="number" class="form-control" data-bind="textInput: Port" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-4">::Passphrase:::</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control" data-bind="textInput: Passphrase" />
                                        </div>
                                    </div>
                                    <div class="form-group" data-bsu="field-validate" data-bsu-field="UseKeepAliveValidation">
                                        <div class="col-sm-offset-4 col-sm-8 checkbox">
                                            <label>
                                                <input type="checkbox" data-bind="checked: UseKeepAlive" />
                                                ::UseKeepAlive::
                                            </label>
                                        </div>
                                    </div>
                                    <div class="form-group" data-bsu="field-validate" data-bsu-field="IdleTimeoutValidation">
                                        <label class="col-sm-4">::IdleTimeout:::</label>
                                        <div class="col-sm-8">
                                            <div class="input-group">
                                                <input type="number" class="form-control" data-bind="textInput: IdleTimeoutSeconds" />
                                                <span class="input-group-addon">::Seconds::</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div data-bind="visible: ConnectionType() == 1">
                                    <div class="form-section">
                                        ::USBOverCOM::
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!---->
                        <!-- DATA SOURCES -->
                        <!---->

                        <div data-bsu="collapsible-panel" data-bsu-options="expanded" data-bind="with: $root.BaseStationSettingsModel">
                            <div>
                                ::OptionsDataSourcesSheetTitle::
                                <div class="pull-right" data-bsu="validate-icons" data-bsu-field="WrapUpValidation"></div>
                            </div>
                            <div class="form-horizontal">
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="DatabaseFileNameValidation">
                                    <label class="col-sm-4">::DatabaseFileName:::</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" data-bind="textInput: DatabaseFileName" />
                                    </div>
                                </div>
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="OperatorFlagsFolderValidation">
                                    <label class="col-sm-4">::FlagsFolder:::</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" data-bind="textInput: OperatorFlagsFolder" />
                                    </div>
                                </div>
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="SilhouettesFolderValidation">
                                    <label class="col-sm-4">::SilhouettesFolder:::</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" data-bind="textInput: SilhouettesFolder" />
                                    </div>
                                </div>
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="PicturesFolderValidation">
                                    <label class="col-sm-4">::PicturesFolder:::</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" data-bind="textInput: PicturesFolder" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-4 col-sm-8 checkbox">
                                        <label>
                                            <input type="checkbox" data-bind="checked: SearchPictureSubFolders" />
                                            ::SearchPictureSubFolders::
                                        </label>
                                    </div>
                                </div>

                                <div class="form-section">
                                    ::AircraftDetailsOnlineLookup::
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-offset-4 col-sm-8 checkbox">
                                        <label>
                                            <input type="checkbox" data-bind="checked: LookupAircraftDetailsOnline" />
                                            ::LookupAircraftDetailsOnline::
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-4">
                                        ::DataProvider:::
                                    </label>
                                    <div class="col-sm-8">
                                        <span data-bind="text: $root.OnlineLookupSupplierName"></span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-offset-4 col-sm-8">
                                        <span data-bind="text: $root.OnlineLookupSupplierCredits"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!---->
                        <!-- RECEIVER LOCATION -->
                        <!---->

                        <div data-bsu="collapsible-panel" data-bsu-options="expanded">
                            <div>
                                ::ReceiverLocationsTitle::
                                <div class="pull-right" data-bsu="validate-icons" data-bsu-field="ReceiverLocationWrapUpValidation"></div>
                            </div>
                            <div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <button type="button" class="btn btn-info" data-bind="click: $.proxy(pageHandler.updateLocationsFromBaseStation, pageHandler)">
                                            ::UpdateFromBaseStationDatabase::
                                        </button>
                                    </div>
                                    <div class="col-sm-6 text-right">
                                        <button type="button" class="btn btn-info" data-bind="click: $.proxy(pageHandler.createAndEditReceiverLocation, pageHandler)">
                                            ::Add::
                                        </button>
                                    </div>
                                </div>
                                <div class="row table-responsive">
                                    <table class="table table-condensed table-striped">
                                        <thead>
                                            <tr>
                                                <th class="thin-column"></th>
                                                <th>::Name::</th>
                                                <th>::Latitude::</th>
                                                <th>::Longitude::</th>
                                                <th class="thin-column"></th>
                                            </tr>
                                        </thead>
                                        <tbody data-bind="foreach: ReceiverLocations">
                                            <tr>
                                                <td class="thin-column">
                                                    <div data-bsu="validate-icons" data-bsu-field="WrapUpValidation"></div>
                                                </td>
                                                <td data-bind="text: Name"></td>
                                                <td data-bind="text: FormattedLatitude"></td>
                                                <td data-bind="text: FormattedLongitude"></td>
                                                <td class="text-nowrap">
                                                    <button type="button" class="btn btn-success" data-bind="click: SelectRow" data-toggle="modal" data-target="#edit-receiver-location">
                                                        <span class="glyphicon glyphicon-pencil"></span>
                                                    </button>
                                                    <button type="button" class="btn btn-danger" data-bind="click: DeleteRow">
                                                        <span class="glyphicon glyphicon-remove"></span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div id="edit-receiver-location" data-bsu="modal" data-bsu-options="header-close" data-bind="with: $root.selectedReceiverLocation()">
                            <div>
                                <span data-bind="text: Name"></span>
                            </div>
                            <div class="form-horizontal">
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="NameValidation">
                                    <label class="col-sm-4">::Name:::</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" data-bind="textInput: Name" />
                                    </div>
                                </div>
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="LatitudeValidation">
                                    <label class="col-sm-4">::Latitude:::</label>
                                    <div class="col-sm-8">
                                        <input type="number" class="form-control" data-bind="textInput: Latitude" />
                                    </div>
                                </div>
                                <div class="form-group" data-bsu="field-validate" data-bsu-field="LongitudeValidation">
                                    <label class="col-sm-4">::Longitude:::</label>
                                    <div class="col-sm-8">
                                        <input type="number" class="form-control" data-bind="textInput: Longitude" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr />

                        <div class="row">
                            <div class="col-sm-2">
                                <button type="button" class="btn btn-primary" data-bind="click: $.proxy(pageHandler.save, pageHandler)">
                                    ::Save::
                                </button>
                            </div>
                            <div class="col-sm-10" data-bind="visible: saveAttempted">
                                <div class="alert alert-success">
                                    <span data-bind="text: savedMessage"></span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            $(document).on('ready', function() {
                Bootstrap.Helper.decorateBootstrapElements();
                window.pageHandler = new VRS.WebAdmin.Settings.PageHandler('@view-id@');
            })
        </script>
    </body>
</html>